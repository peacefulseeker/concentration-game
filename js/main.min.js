var concentrationGame=function(t,e){var s={grid:".grid",svgWrapper:".svg-wrapper"},i={status:{finished:!1,started:!1},svgs:[],svgsFlipped:[],counter:0,timer:void 0,mins:0,secs:0,moves:0,matches:0,gridCards:16,shuffle:function(){this.svgs=this.svgs.sort(function(){return Math.random()-.5})}};e.onload=function(){location.hash.length&&t(location.hash).length&&a(t(location.hash),1e3,-20)};var n=function(){t(s.svgWrapper).addClass("flipped")},a=function(e,s,i){t("html,body").not(":animated").delay(s).animate({scrollTop:e.offset().top+i},400)},r=function(){t("a[href^='#']").not('[href="#"]').not('[href="#0"]').on("click",function(e){e.preventDefault();var s=t(t(this).attr("href"));s=s.length?s:t("[name="+t(this).attr("href").slice(1)+"]"),s.length&&a(s,0,-20)}),t(s.grid).on("click",".svg-wrapper",function(){if(!i.status.started)return void alert("Start the game first!");var e=t(this);if(!e.hasClass("matched")){var s=e.data("svg"),n=t(".svg-wrapper.flipped");console.log(i.svgsFlipped);var r=n.filter(function(){return t(this).data("svg")===s});r.length?(e.add(r).addClass("matched").delay(600).queue(function(){t(this).css("visibility","hidden").dequeue()}),t(".svg-wrapper").not(r).removeClass("flipped"),i.matches++):n.length&&t(".svg-wrapper").delay(500).queue(function(e){t(this).stop().removeClass("flipped"),e()}),t(this).addClass("flipped"),i.svgsFlipped.push(t(this).data("svg")),i.moves++,i.matches===i.gridCards/2&&(i.finished=!0,clearInterval(i.timer),setTimeout(function(){t(".button#start-game").text("Start New Game").attr("onclick","concentrationGame.startNewGame(event)");var e="<p>Congratulations! You have successfully finsihed the game in <strong>"+i.mins+" : "+i.secs+"</strong> seconds! You have made <strong>"+i.moves+"</strong> moves to finish the game</p>";t("#result").css("visibility","visible").html(e),a(t("#result"),0,-50)},1e3))}})},o=function(e){var n;t(s.grid).append(e),i.svgs=d(),n=c(),t(s.grid).append(n).addClass("show")},c=function(){for(var e="",s=0;s<2;s++)i.shuffle(),e=function(){return t.each(i.svgs,function(t,s){e+='<div class="svg-wrapper" data-svg="'+s+'">\n<svg class="svg-icon">\n<use xlink:href="#'+s+'"/>\n</svg>\n</div>'}),e}();return e},d=function(){return i.svgs=[],t(".grid > svg").find("symbol[id]").each(function(t,e){i.svgs.push(e.getAttribute("id"))}),i.shuffle(),i.svgs.slice(0,i.gridCards/2)};return{init:function(){console.log("the game has started!"),t.get("img/game-elements.svg",function(t){o(t)},"text"),r()},startGame:function(){if(i.status.started=!0,void 0!==i.timer)return void alert("First Finish The Game");i.timer=setInterval(function(){++i.counter,i.mins=Math.floor(i.counter/60),i.mins=i.mins<10?"0"+i.mins:i.mins,i.secs=i.counter%60,i.secs=i.secs<10?"0"+i.secs:i.secs,t("#mins").text(i.mins),t("#secs").text(i.secs)},1e3)},startNewGame:function(){var s="";if(!i.finished)return void alert("First Finish The Game!");clearInterval(i.timer),i.timer=void 0,i.counter=0,i.moves=0,i.matches=0,t("#mins").text("00"),t("#secs").text("00"),i.svgs=d(),s=c(),t(".grid .svg-wrapper").fadeOut().remove(),t("#result").css("visibility","hidden"),t(".grid").append(s),i.status.finished=!1,e.startGame()},flipAll:n,retrieveData:function(){return i}}}(jQuery,window);!function(t){t(function(){concentrationGame.init()})}(jQuery);