var concentrationGame=function(e,t){var s={grid:".grid",svgWrapper:".svg-wrapper"},n={status:{finished:!1,started:!1},svgs:[],svgsFlipped:[],counter:0,timer:void 0,mins:0,secs:0,moves:0,matches:0,gridCards:16,shuffle:function(){this.svgs=this.svgs.sort(function(){return Math.random()-.5})}};t.onload=function(){location.hash.length&&e(location.hash).length&&a(e(location.hash),1e3,-20),e("#preloader").addClass("hidden")};var i=function(){e(s.svgWrapper).addClass("flipped")},a=function(t,s,n){e("html,body").not(":animated").delay(s).animate({scrollTop:t.offset().top+n},400)},r=function(){e("a[href^='#']").not('[href="#"]').not('[href="#0"]').on("click",function(t){t.preventDefault();var s=e(e(this).attr("href"));s=s.length?s:e("[name="+e(this).attr("href").slice(1)+"]"),s.length&&a(s,0,-20)}),e(s.grid).on("click",".svg-wrapper",function(){var t,s=e(this),i=s.data("svg");if(!n.status.started)return void alert("Start the game first!");if(!s.hasClass("matched")&&!s.hasClass("flipped")){var r=e(".svg-wrapper").filter(".flipped");if(console.log(r),r.length>=3)return void alert("not so fast");t=e.grep(r,function(e){return e.getAttribute("data-svg")===i}),t.length?(s.add(t).addClass("matched").delay(600).queue(function(){e(this).css("visibility","hidden").removeClass("flipped").dequeue()}),n.matches++):r.length&&e(".svg-wrapper").delay(500).queue(function(t){e(this).stop().removeClass("flipped"),t()}),s.addClass("flipped"),-1===e.inArray(i,n.svgsFlipped)&&n.svgsFlipped.push(i),n.moves++,n.matches===n.gridCards/2&&(console.log("The game was finished!"),n.finished=!0,clearInterval(n.timer),setTimeout(function(){e(".button#start-game").text("Start New Game").attr("onclick","concentrationGame.startNewGame(event)");var t="<p>Congratulations! You have successfully finsihed the game in <strong>"+n.mins+" : "+n.secs+"</strong> seconds! You have made <strong>"+n.moves+"</strong> moves to finish the game</p>";e("#result").css("visibility","visible").html(t),a(e("#result"),0,-100)},1e3))}})},o=function(t){var i;e(s.grid).append(t),n.svgs=c(),i=d(),e(s.grid).append(i).addClass("show")},d=function(){for(var t="",s=0;s<2;s++)n.shuffle(),t=function(){return e.each(n.svgs,function(e,s){t+='<div class="svg-wrapper" data-svg="'+s+'">\n<svg class="svg-icon">\n<use xlink:href="#'+s+'"/>\n</svg>\n</div>'}),t}();return t},c=function(){return n.svgs.length=0,e(".grid > svg").find("symbol[id]").each(function(e,t){n.svgs.push(t.getAttribute("id"))}),n.shuffle(),n.svgs.slice(0,n.gridCards/2)};return{init:function(){console.log("The game was initialised!"),e.get("img/game-elements.svg",function(e){o(e)},"text"),r()},startGame:function(){if(console.log("The game was started!"),n.status.started=!0,void 0!==n.timer)return void alert("First Finish The Game");n.timer=setInterval(function(){++n.counter,n.mins=Math.floor(n.counter/60),n.mins=n.mins<10?"0"+n.mins:n.mins,n.secs=n.counter%60,n.secs=n.secs<10?"0"+n.secs:n.secs,e("#mins").text(n.mins),e("#secs").text(n.secs)},1e3)},startNewGame:function(){var t="";if(!n.finished)return void alert("First Finish The Game!");clearInterval(n.timer),n.timer=void 0,n.counter=0,n.moves=0,n.matches=0,e("#mins").text("00"),e("#secs").text("00"),n.svgs=c(),t=d(),e(".grid .svg-wrapper").fadeOut().remove(),e("#result").css("visibility","hidden"),e(".grid").append(t),n.status.finished=!1,console.log("The game was restarted!"),concentrationGame.startGame(),a(e("#game"),0,-100)},flipAll:i,retrieveData:function(){return n}}}(window.jQuery,window,document);!function(e){e(function(){concentrationGame.init()})}(jQuery);